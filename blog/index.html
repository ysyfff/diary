<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Blog · 日记</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The Diary of Shiyong Yin"/><meta property="og:title" content="Blog · 日记"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/diary/index.html"/><meta property="og:description" content="The Diary of Shiyong Yin"/><meta property="og:image" content="https://your-docusaurus-test-site.com/diary/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/diary/img/docusaurus.png"/><link rel="shortcut icon" href="/diary/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://your-docusaurus-test-site.com/diary/blog/atom.xml" title="日记 Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://your-docusaurus-test-site.com/diary/blog/feed.xml" title="日记 Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener("DOMContentLoaded", function(){
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/diary/css/main.css"/></head><body class="separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/diary/"><img class="logo" src="/diary/img/logo.svg" alt="日记"/><h2 class="headerTitleWithLogo">日记</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/diary/blog" target="_self">Diary</a></li><li class=""><a href="https://github.com/ysyfff/diary" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>All Blog Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>All Blog Posts</h3><ul><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/16/CV.html">个人简历</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/14/workspaces.html">workspaces是什么</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/12/local-test-npm-package.html">npm包测试之低高级策略</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/08/version.html">谈谈version</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/07/thin.html">减肥之道</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/07/problem.html">问题汇总</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/07/nginx-config.html">一个nginx配置</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/07/good-tool.html">好用的工具</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/07/good-npm.html">好用的npm包</a></li><li class="navListItem"><a class="navItem" href="/diary/blog/2018/06/06/framework.html">流行框架学习对比</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer documentContainer postContainer blogContainer"><div class="wrapper"><div class="posts"><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/16/CV.html">个人简历</a></h1><p class="post-meta">June 16, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">尹士勇</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="个人简介"></a><a href="#个人简介" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>个人简介</h2>
<p>求职：<strong>前端工程师</strong></p>
<p>
<div class="cv-wrapper">
<div>姓名：尹士勇</div>
<div >性别：男</div>
</div>
<div class="cv-wrapper">
<div>电话：188 1096 1061</div>
<div >年龄：1989.05</div>
</div>
<div class="cv-wrapper">
<div>邮箱：braveyin168@outlook.com</div>
<div >现居：北京（7月2号以后回成都）</div>
</div>
</p>
<h2><a class="anchor" aria-hidden="true" id="教育背景"></a><a href="#教育背景" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>教育背景</h2>
<div class="cv-wrapper">
<div>西南科技大学（2010.09~2014.07）</div>     
<div>计算机科学与技术/学士/本科</div>
</div>
<p>在校期间</p>
<ul>
<li>ACM团队队员，曾参加学院、学校、四川省程序设计竞赛，并获奖</li>
<li>重构优化学校OJ系统，主要担任前端开发，并进行了数据库迁移</li>
</ul>
<p>资料</p>
<ul>
<li>学校OJ地址：<a href="http://acm.swust.edu.cn/">http://acm.swust.edu.cn/</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="工作经历"></a><a href="#工作经历" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>工作经历</h2>
<div class="cv-wrapper">
<div>去哪儿网 4年（2014.07~至今）</div>     
<div>职位：前端工程师</div>
</div>
<p>主要工作内容</p>
<ul>
<li>2014~2016    供应链系统开发，销售人员使用，内部系统，主要技术Avalon</li>
<li>2016~2016    再出发系统开发，代理商使用，外部系统，主要技术Avalon</li>
<li>2016~2017    QTA系统开发，客服运营使用，内部系统，主要技术Avalon</li>
<li>2017~2017    酒店美食应用开发，客户使用，外部系统，主要技术React Native</li>
<li>2017-至今    音箱商户和运营系统开发，分别为商户和运营使用，主要技术React</li>
</ul>
<p>资料</p>
<ul>
<li>再出发系统地址：<a href="https://www.zcfgoagain.com/">https://www.zcfgoagain.com/</a></li>
<li>音箱商户系统地址：<a href="https://easyzhush.qunar.com/">https://easyzhush.qunar.com/</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="吃饭家伙"></a><a href="#吃饭家伙" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>吃饭家伙</h2>
<ul>
<li>了解github、travis、<del>circle</del>、<strong>jest</strong>、enzyme、eslint、<strong>prettier</strong></li>
<li>了解node、socket.io、<strong>packing</strong>、gulp、grunt、webpack、bash</li>
<li>了解JavaScript、Vue、React、React Native、<del>Avalon</del>、Angular</li>
<li>了解<strong>mobx</strong>、rxjs、redux</li>
<li>了解iview、antd</li>
<li>了解ajax、CORS、http、websocket</li>
<li>了解jquery、html、pug、handlerbars、css</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="一句话自评"></a><a href="#一句话自评" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一句话自评</h2>
<p>基础不错，做事仔细负责；英语还行，学习能力强。</p>
<h2><a class="anchor" aria-hidden="true" id="其他"></a><a href="#其他" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他</h2>
<ul>
<li>一个PR：<a href="https://github.com/react-component/calendar/pull/349">https://github.com/react-component/calendar/pull/349</a></li>
<li>一个NPM包：<a href="https://yarnpkg.com/zh-Hans/package/q-antd">https://yarnpkg.com/zh-Hans/package/q-antd</a></li>
<li>一个开发文档：<a href="https://ysyfff.github.io/merchant-fe-doc/docs/notice.html">https://ysyfff.github.io/merchant-fe-doc/docs/notice.html</a></li>
<li>一个日记：<a href="https://ysyfff.github.io/diary/blog/">https://ysyfff.github.io/diary/blog/</a></li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/14/workspaces.html">workspaces是什么</a></h1><p class="post-meta">June 14, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><p>感觉vue-cli写得相当不错，想瞅瞅源码，于是就进入package.json中找找main字段吧，因为main
字段就是工程的入口文件嘛。</p>
<p>上下看了三遍，卧槽，没有！</p>
<p>好吧，main字段没有，bin总该有吧。</p>
<p>上下又看了三遍，卧槽，还是没有，唯一可疑的发现了个workspaces字段。</p>
<h2><a class="anchor" aria-hidden="true" id="寻找"></a><a href="#寻找" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>寻找</h2>
<p>你牛B，那就去npm官网瞅瞅workspaces字段是什么意思吧。</p>
<p>卧槽，无此字段的介绍。瞬间一脸的懵逼。</p>
<p>后来各种搜索why package.json no main keyword，未找到答案</p>
<h2><a class="anchor" aria-hidden="true" id="结果"></a><a href="#结果" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结果</h2>
<p>最后尝试了下package.json workspaces关键词的搜索，找到了yarn的一篇文章(<a href="https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/">原文传送门</a>)，柳暗花明又一村了。</p>
<p>大概意思是，随着时间的推移我们的项目会变得越来越大，模块越来越多。这时候有两种解决方案。</p>
<ol>
<li>将子模块放到其他repo中来进行管理，但是你会发现负担很重，需要多个地方写代码，多个地方处理issue等</li>
<li>将所有模块进行拆分都放到同一个repo钟来管理</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="monorepos"></a><a href="#monorepos" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monorepos</h2>
<p>放在同一个repo中来管理的时候通常使用Monorepos的方式来管理此repo，使用这种方式的有很多我们经常使用
的js包，比如Babel, React, Vue, Angular, Jest等</p>
<p>然而，仅仅进行拆分并使用Monorepos管理远远是不够的，比如测试，管理依赖，发布多个包等变得复杂起来。
这是一些工具比如Lerna就派上了用场</p>
<h2><a class="anchor" aria-hidden="true" id="lerna"></a><a href="#lerna" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lerna</h2>
<p>Lerna是一个对多个子模块工程管理进行优化的工具。简而言之，Lerna会安装在工程中的每个package，并在
相互依赖的package之间创建软链接。</p>
<p>然而，作为一个包管理的装饰器，Lerna不能有效的控制node_module中的内容。
比如多个子模块都依赖同一个包。Lerna会安装多次而不是一次。</p>
<h2><a class="anchor" aria-hidden="true" id="workspaces"></a><a href="#workspaces" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workspaces</h2>
<p>Workspaces能够让用户根据根package.json中的workspace字段从多个子文件中的package.json中安装以依赖。</p>
<p>例如Jest的例子</p>
<p>工程目录结构如下</p>
<pre><code class="hljs css languages- js">| jest/
| ---- package.json <span class="hljs-comment">//根package.json</span>
| ---- packages/
| -------- jest-matcher-utils/
| ------------ package.json <span class="hljs-comment">//子package.json</span>
| -------- jest-diff/
| ------------ package.json
...
</code></pre>
<p>根package.json内容如下</p>
<pre><code class="hljs css languages- json">{
  <span class="hljs-attr">"private"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"jest"</span>,
  <span class="hljs-attr">"devDependencies"</span>: {
    <span class="hljs-attr">"chalk"</span>: <span class="hljs-string">"^2.0.1"</span>
  },
  <span class="hljs-attr">"workspaces"</span>: [
    <span class="hljs-string">"packages/*"</span>
  ]
}
</code></pre>
<p>两个字模块中的package.json如下</p>
<ol>
<li>jest-matcher-utils
<pre><code class="hljs css languages- json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"jest-matcher-utils"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"20.0.3"</span>,
  <span class="hljs-attr">"license"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"chalk"</span>: <span class="hljs-string">"^1.1.3"</span>,
    <span class="hljs-attr">"pretty-format"</span>: <span class="hljs-string">"^20.0.3"</span>
  }
}
</code></pre></li>
<li>jest-diff (依赖了jest-matcher-utils)
<pre><code class="hljs css languages- json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"jest-diff"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"20.0.3"</span>,
  <span class="hljs-attr">"license"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"chalk"</span>: <span class="hljs-string">"^1.1.3"</span>,
    <span class="hljs-attr">"diff"</span>: <span class="hljs-string">"^3.2.0"</span>,
    <span class="hljs-attr">"jest-matcher-utils"</span>: <span class="hljs-string">"^20.0.3"</span>,
    <span class="hljs-attr">"pretty-format"</span>: <span class="hljs-string">"^20.0.3"</span>
  }
}
</code></pre></li>
</ol>
<p>使用Lerno进行安装结果</p>
<pre><code class="hljs css languages- js">| jest/
| ---- node_modules/
| -------- chalk/
| ---- package.json
| ---- packages/
| -------- jest-matcher-utils/
| ------------ node_modules/
| ---------------- chalk/
| ---------------- pretty-format/
| ------------ package.json
| -------- jest-diff/
| ------------ node_modules/
| ---------------- chalk/
| ---------------- diff/
| ---------------- jest-matcher-utils/  (symlink) -&gt; ../jest-matcher-utils
| ---------------- pretty-format/
| ------------ package.json
...
</code></pre>
<p>我们可以看到jest-matcher-utils的冗余</p>
<p>使用workpaces进行安装</p>
<pre><code class="hljs">| <span class="hljs-type">jest</span>/
| <span class="hljs-type">---- node_modules</span>/
| <span class="hljs-type">-------- chalk</span>/
| <span class="hljs-type">-------- diff</span>/
| <span class="hljs-type">-------- pretty</span>-format/
| <span class="hljs-type">-------- jest</span>-matcher-utils/  (symlink) -&gt; ../packages/jest-matcher-utils
| <span class="hljs-type">---- package</span>.json
| <span class="hljs-type">---- packages</span>/
| <span class="hljs-type">-------- jest</span>-matcher-utils/
| <span class="hljs-type">------------ node_modules</span>/
| <span class="hljs-type">---------------- chalk</span>/
| <span class="hljs-type">------------ package</span>.json
| <span class="hljs-type">-------- jest</span>-diff/
| <span class="hljs-type">------------ node_modules</span>/
| <span class="hljs-type">---------------- chalk</span>/
| <span class="hljs-type">------------ package</span>.json
...
</code></pre>
<p>我们看到只有一个jest-matcher-utils</p>
<h2><a class="anchor" aria-hidden="true" id="管理workspaces中的依赖"></a><a href="#管理workspaces中的依赖" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>管理workspaces中的依赖</h2>
<p>仅仅使用<code>yarn add</code>等命令在workspaces文件家中进行管理即可。</p>
<pre><code class="hljs css languages- bash">$ <span class="hljs-built_in">cd</span> packages/jest-matcher-utils/
$ yarn add left-pad
✨ Done <span class="hljs-keyword">in</span> 1.77s.
$ git status
modified: package.json
modified: ../../yarn.lock
</code></pre>
<p>但是注意，workspaces中无yarn.lock，只在root中含有一个yarn.lock</p>
<h2><a class="anchor" aria-hidden="true" id="整合workspaces和lerna"></a><a href="#整合workspaces和lerna" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>整合workspaces和Lerna</h2>
<p>workspaces并没有使Lerna过时</p>
<p>Lerna有他的长处和优点，可以和workspaces共存</p>
<p>Jest使用yarn来启动工程，使用Lerna来发布。</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/12/local-test-npm-package.html">npm包测试之低高级策略</a></h1><p class="post-meta">June 12, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><blockquote>
<p>以下操作是基于yarn的，npm同样有效</p>
</blockquote>
<div class="update">
<h2><a class="anchor" aria-hidden="true" id="20180617更"></a><a href="#20180617更" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2018.06.17更</h2>
<h3><a class="anchor" aria-hidden="true" id="原文问题"></a><a href="#原文问题" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原文问题</h3>
<p>在之前介绍的三个方法中，虽然第三个方法看上去很完美。但是依然有一个问题。会出现multi package的问题，这是一个什么问题呢？比如我们的实际工程merchant_fe中引入了react，我们引入的q-antd(q-antd是被测试的包)中也引入了react。那么这时就需要在merchant_fe和q-antd都引入react，他们并没有引用同一个react包。</p>
<h3><a class="anchor" aria-hidden="true" id="高级策略-jest"></a><a href="#高级策略-jest" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>高级策略——jest</h3>
<p>那么有没更好的方法来解决测试的问题？我们是不是可以换一种思路来解决问题，之前都是通过装包的方式来进行测试。
我们可否不装包就行测试，而是直接对包进行测试呢？</p>
<p>左思右想了下，之前了解过jest，不就是可以用在这种情况下。</p>
<p>于是，引入jest进行尝试。果不其然，完全可以。这才是真正的正解吧，只要我的包通过了各种姿势的测试，就不怕安装的包有问题。</p>
</div>
<h2><a class="anchor" aria-hidden="true" id="每次发包真的烦"></a><a href="#每次发包真的烦" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>每次发包真的烦</h2>
<p>开发一个npm包，偶尔或许经常需要优化下，每次都发包，然后安包，最后再测试，肯定太繁琐了。还有可能遇到愚蠢的错误，比如变量
未定义变量等。</p>
<p>所以，在发包前进行简单或者完整的测试是有必要的，这样也不至于导致我们的包的版本非常多。</p>
<h2><a class="anchor" aria-hidden="true" id="方法一-使用路径引用包"></a><a href="#方法一-使用路径引用包" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法一、使用路径引用包</h2>
<ul>
<li>在修改测试包之后是否能够更新的到：能</li>
</ul>
<p>比如要测试q-antd</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">import</span> { Form } <span class="hljs-keyword">from</span> <span class="hljs-string">'absoulte_path|relative_path/to/q-antd'</span>
</code></pre>
<p>这个方法最简单，适用于有个专门的测试工程来做测试这件事情.在实际工程中我们往往是这样引用的</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">import</span> { Form } <span class="hljs-keyword">from</span> <span class="hljs-string">'q-antd'</span>
</code></pre>
<p>每次测试完还需要改回来，太愚蠢了。</p>
<p>所以，不建议此方法。</p>
<h2><a class="anchor" aria-hidden="true" id="方法二-使用pack"></a><a href="#方法二-使用pack" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法二、使用pack</h2>
<ul>
<li>在修改测试包之后是否能够更新的到：不能，需要再次pack</li>
</ul>
<p>具体步骤如下</p>
<pre><code class="hljs css languages- bash"><span class="hljs-meta">#!/usr/local/env bash</span>
<span class="hljs-built_in">cd</span> path/to/q-antd
yarn pack
<span class="hljs-built_in">cd</span> path/to/测试工程
yarn add absolute_path|realtive_path/to/q-antd/q-antd-version.tgz
</code></pre>
<p><code>yarn pack</code>会将q-antd包生成一个tgz压缩包，然后就可以通过yarn来安装了</p>
<p>此方法其实和发布npm类似，没死修改之后都需要执行上面的至少两个步骤。而且每次pack的版本不能相同，否则，新增的内容不会
被引用到</p>
<p>总之，此方法也不行，太麻烦</p>
<h2><a class="anchor" aria-hidden="true" id="方法三-完美大招-使用link"></a><a href="#方法三-完美大招-使用link" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法三、完美大招——使用link</h2>
<ul>
<li>在修改测试包之后是否能够更新的到：能</li>
</ul>
<p>具体步骤如下</p>
<pre><code class="hljs css languages- bash"><span class="hljs-meta">#!/usr/local/env bash</span>
<span class="hljs-built_in">cd</span> path/to/q-antd
yarn link
<span class="hljs-built_in">cd</span> path/to/测试工程
yarn link q-antd
</code></pre>
<p><code>yarn link</code>会将q-antd放到node的全局变量里面，所以在目标工程里直接<code>yarn link q-antd</code>就可以了。</p>
<p>link一次，使用永久</p>
<p>此乃最佳方法</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/08/version.html">谈谈version</a></h1><p class="post-meta">June 8, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="fekit中的version"></a><a href="#fekit中的version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fekit中的version</h2>
<p>fekit会将所有前端文件的version单独打包到一个ver目录下面，然后通过jar包放到后端目录下面，后端运行代码进行版本号的替换。</p>
<h2><a class="anchor" aria-hidden="true" id="ykit中的version"></a><a href="#ykit中的version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ykit中的version</h2>
<p>和fekit基本类似</p>
<h2><a class="anchor" aria-hidden="true" id="qxf中的version"></a><a href="#qxf中的version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>qxf中的version</h2>
<p>和fekit基本类似</p>
<h2><a class="anchor" aria-hidden="true" id="我眼中的version"></a><a href="#我眼中的version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我眼中的version</h2>
<p>十分纳闷，前端html模板为什么要放在后端？而version的产生却在前端。然后通过前后端关联version，这无疑增加了工作量，还要将对应的version进行对应的替换，往往一些新的前端或者后端同学对此一头雾水。新增一个页面的时候，后端就懵逼了。
前端还要告诉后端需要引入哪些js，哪些css，效率太低，容易出错。</p>
<p>正确的做法：前端生成html文件，此文件中包含了内容和带版本号的css标签以及带版本号的js标签，直接前后端进行文件的关联就可以。
效率高，不容易出错，前后端端分离更彻底。后端根本不用管前端这些事情。</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/07/thin.html">减肥之道</a></h1><p class="post-meta">June 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="增肥原理"></a><a href="#增肥原理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>增肥原理</h2>
<p><img src="/diary/img/碳水化合物.png" alt="碳水化合物">
由碳、氢和氧三种元素组成，由于它所含的氢氧的比例为二比一，和水一样，故称为碳水化合物</p>
<p>食物中的碳水化合物分成两类：人可以吸收利用的有效碳水化合物如单糖、双糖、多糖和人不能消化的无效碳水化合物，如纤维素，是人体必须的物质</p>
<p>碳水化合物只有经过消化分解成葡萄糖·果糖和半乳糖才能被吸收，而果糖和半乳糖又经肝脏转换变成葡萄糖。血中的葡萄糖简称为血糖，少部分血糖直接被组织细胞利用与氧气反应生成二氧化碳和水，放出热量供身体需要，大部分血糖则存在人体细胞中，如果细胞中储存的葡萄糖已饱和，多余的葡萄糖就会以高能的脂肪形式储存起来，多吃碳水化合物发胖就是这个道理！</p>
<h2><a class="anchor" aria-hidden="true" id="阿特金斯减肥法"></a><a href="#阿特金斯减肥法" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>阿特金斯减肥法</h2>
<p><a href="https://baike.baidu.com/item/%E9%98%BF%E7%89%B9%E9%87%91%E6%96%AF%E5%87%8F%E8%82%A5%E6%B3%95/10274744">阿特金斯减肥法</a></p>
<p>1972年，一本新书的出版把美国人吓了一跳：那本书颠覆了传统的减肥理念，告诉大众：“肥胖的元凶不是脂肪，而是碳水化合物！”</p>
<p>这就是阿特金斯博士开创的低碳减肥法，在国内又被称作食肉减肥法。</p>
<h3><a class="anchor" aria-hidden="true" id="科学原理"></a><a href="#科学原理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>科学原理</h3>
<p><img src="/diary/img/阿特金斯原理.png" alt="阿特金斯原理"></p>
<p>阿特金斯饮食法限制碳水化合物的摄入，目的是转变身体的新陈代谢方式，由以葡萄糖为燃料的燃糖代谢转变为以体内储存的脂肪为燃料的燃脂代谢。当胰岛素浓度低时，这个程序（被称为甲酮代谢，区别于酮症）就会启动；当血糖浓度低时（主要是在吃饭前）正常人体内的胰岛素也最低。在饭后，碳水化合物（如，葡萄糖或淀粉[形成葡萄糖链]）产生大部分血糖，并可以计算出。由于纤维不易消化，它几乎不产生能量，也不会明显影响葡萄糖和胰岛素浓度。甲酮代谢包括脂类分解——脂肪细胞内储存的某些脂质在其中转化为血液的一部分。</p>
<h3><a class="anchor" aria-hidden="true" id="十大准则"></a><a href="#十大准则" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十大准则</h3>
<ol>
<li>稳定血糖是通过控制碳水化合物摄入量进行减肥的基本手段。你可以一天吃4到5顿小餐，只要碳水化合物摄入量不超过20克就行。而且大部分必须来自沙拉青菜和其他蔬菜。</li>
<li>你可以吃任意量的鸡蛋、肉和鱼，包括牛肉、猪肉、鸡肉、火鸡肉、羊肉、鸭肉和贝类海鲜。吃到心满意足为止。</li>
<li>不管吃多少脂肪和食用油都是允许的。它们包括黄油、橄榄油、蛋黄酱以及食用油（不要吃任何经过氢化处理的油或其他人造脂肪，包括人造黄油）。</li>
<li>香料和佐料可以吃，只要不含糖。</li>
<li>奶酪每天只能吃3到4盎司。</li>
<li>每天至少喝8杯水，每杯8盎司，补充水分、防止便秘，并排出消耗脂肪产生的副产品。</li>
<li>要避免喝含有咖啡因的咖啡、茶和软饮料。事实证明，咖啡因过量会造成低血糖，从而促使你想吃糖。无论如何酒都是不能喝的。</li>
<li>绝对不要吃糖、牛奶、酸奶、面粉产品、谷物食品、含淀粉的蔬菜、大豆、甜的调味品、坚果以及任何水果和果汁。</li>
<li>你可以经常外出吃饭，但要警惕肉汁、酱油和调味汁里藏有的糖分。</li>
<li>你必须每天进行锻炼。</li>
</ol>
<p>即使像水果和杂粮等一些本来有益健康的碳水化合物食品也须限量。减肥成功之后，你可以适量地吃水果和淀粉类食品，但要保证其不影响你的新陈代谢，以免体重增加。而那些精加工食品则无论何时都对人体无益。</p>
<h2><a class="anchor" aria-hidden="true" id="可以吃哪些东西"></a><a href="#可以吃哪些东西" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>可以吃哪些东西？</h2>
<p>严格模式下(前期建议这么做)</p>
<ul>
<li>任何肉类
<ul>
<li>鸡肉，牛肉，猪肉，鱼肉等</li>
</ul></li>
<li>蛋类
<ul>
<li>鸡蛋，鸭蛋，鹅蛋等</li>
</ul></li>
</ul>
<p>非严格模式下(到了瓶颈期之后建议这么做，准备持久战)</p>
<ul>
<li>蔬菜
<table>
<thead>
<tr><th>名字</th><th>碳水化合物含量</th></tr>
</thead>
<tbody>
<tr><td>牛肉</td><td>0.1</td></tr>
<tr><td>羊肉</td><td>0.2</td></tr>
<tr><td>驴肉</td><td>0.4</td></tr>
<tr><td>鳕鱼</td><td>0.5</td></tr>
<tr><td>河蚌, 大黄鱼, 蚌肉, 蛤蜊</td><td>0.8</td></tr>
<tr><td>兔肉, 海参</td><td>0.9</td></tr>
<tr><td>猪心, 蟹肉</td><td>1.1</td></tr>
<tr><td>豆汁, 鸡蛋</td><td>1.3</td></tr>
<tr><td>腰子</td><td>1.4</td></tr>
<tr><td>猪肉</td><td>1.5</td></tr>
<tr><td>狗肉, 油菜心</td><td>1.8</td></tr>
<tr><td>牛肉干, 香菇, 冬瓜</td><td>1.9</td></tr>
<tr><td>猪肘棒, 鹌鹑蛋</td><td>2.1</td></tr>
<tr><td>松子仁, 腌黄瓜, 莴苣</td><td>2.2</td></tr>
<tr><td>花生酱</td><td>2.3</td></tr>
<tr><td>佛手瓜, 鸡胸脯肉, 芹菜</td><td>2.5</td></tr>
<tr><td>西兰花, 油菜, 蘑菇</td><td>2.7</td></tr>
<tr><td>菠菜, 鹅蛋, 豌豆苗</td><td>2.8</td></tr>
<tr><td>杏仁</td><td>2.9</td></tr>
<tr><td>黄豆芽</td><td>3</td></tr>
<tr><td>鸭蛋, 大白菜</td><td>3.1</td></tr>
<tr><td>酱牛肉, 西葫芦, 韭菜</td><td>3.2</td></tr>
<tr><td>金针菇, 腌雪里红</td><td>3.3</td></tr>
<tr><td>菜花, 牛奶</td><td>3.4</td></tr>
<tr><td>荷兰豆, 奶酪, 苦瓜, 番茄, 茄子</td><td>3.5</td></tr>
<tr><td>丝瓜</td><td>3.6</td></tr>
<tr><td>辣椒</td><td>3.7</td></tr>
<tr><td>白瓜子, 鲫鱼, 豆腐</td><td>3.8</td></tr>
<tr><td>基围虾, 素鸡</td><td>3.9</td></tr>
<tr><td>甜椒, 鲜豇豆, 茭白, 萝卜, 鸭肉</td><td>4</td></tr>
<tr><td>油豆腐</td><td>4.3</td></tr>
<tr><td>榨菜</td><td>4.4</td></tr>
<tr><td>白兰花, 松花蛋</td><td>4.5</td></tr>
<tr><td>鸡翅</td><td>4.6</td></tr>
<tr><td>淡菜, 蟹</td><td>4.7</td></tr>
<tr><td>醋</td><td>4.9</td></tr>
<tr><td>芫荽</td><td>5</td></tr>
<tr><td>大葱</td><td>5.2</td></tr>
<tr><td>羊乳, 草虾</td><td>5.4</td></tr>
<tr><td>猪肝</td><td>5.6</td></tr>
<tr><td>白金兰</td><td>5.7</td></tr>
<tr><td>香肠</td><td>5.9</td></tr>
<tr><td>草莓, 大头菜</td><td>6</td></tr>
<tr><td>甘露</td><td>6.3</td></tr>
<tr><td>西瓜</td><td>6.4</td></tr>
<tr><td>毛豆</td><td>6.5</td></tr>
<tr><td>鲍鱼</td><td>6.6</td></tr>
<tr><td>芒果, 冬菜</td><td>7</td></tr>
<tr><td>梨</td><td>7.3</td></tr>
<tr><td>母乳</td><td>7.4</td></tr>
<tr><td>杏</td><td>7.5</td></tr>
<tr><td>腐乳, 姜</td><td>7.6</td></tr>
<tr><td>胡萝卜, 哈密瓜</td><td>7.7</td></tr>
<tr><td>李子</td><td>7.8</td></tr>
<tr><td>小米粥</td><td>8.4</td></tr>
<tr><td>松子</td><td>9</td></tr>
<tr><td>酸奶</td><td>9.3</td></tr>
<tr><td>菠萝</td><td>9.5</td></tr>
<tr><td>核桃</td><td>9.6</td></tr>
<tr><td>橘子, 西瓜子</td><td>9.7</td></tr>
<tr><td>米粥</td><td>9.8</td></tr>
<tr><td>葡萄, 酱油</td><td>9.9</td></tr>
<tr><td>八宝菜</td><td>10.2</td></tr>
<tr><td>炸鸡, 橙</td><td>10.5</td></tr>
<tr><td>豆腐干</td><td>10.7</td></tr>
<tr><td>桃</td><td>10.9</td></tr>
<tr><td>马肉</td><td>11</td></tr>
<tr><td>凉粉</td><td>11.2</td></tr>
<tr><td>柑</td><td>11.5</td></tr>
<tr><td>山药</td><td>11.6</td></tr>
<tr><td>猕猴桃</td><td>11.9</td></tr>
<tr><td>苹果</td><td>12.3</td></tr>
<tr><td>葵花籽</td><td>13</td></tr>
<tr><td>鱼子酱</td><td>14.4</td></tr>
<tr><td>榛子</td><td>14.7</td></tr>
<tr><td>藕</td><td>15.2</td></tr>
<tr><td>甘蔗</td><td>15.4</td></tr>
<tr><td>火腿肠</td><td>15.6</td></tr>
<tr><td>花生仁</td><td>16</td></tr>
<tr><td>荔枝</td><td>16.1</td></tr>
<tr><td>桂圆</td><td>16.2</td></tr>
<tr><td>马铃薯</td><td>16.5</td></tr>
<tr><td>素虾</td><td>16.6</td></tr>
<tr><td>芝麻酱</td><td>16.8</td></tr>
<tr><td>柿子</td><td>17.1</td></tr>
<tr><td>冰欺凌, 海带, 花生</td><td>17.3</td></tr>
<tr><td>黄酱</td><td>17.9</td></tr>
<tr><td>豆腐皮, 黄豆</td><td>18.6</td></tr>
<tr><td>香蕉</td><td>20.8</td></tr>
<tr><td>腐竹</td><td>21.3</td></tr>
<tr><td>芝麻</td><td>21.7</td></tr>
<tr><td>山楂</td><td>22</td></tr>
<tr><td>紫菜</td><td>22.5</td></tr>
<tr><td>红薯</td><td>23.1</td></tr>
<tr><td>橘汁</td><td>23.2</td></tr>
<tr><td>豆瓣酱</td><td>24.8</td></tr>
<tr><td>米饭</td><td>25</td></tr>
<tr><td>糖蒜</td><td>25.9</td></tr>
<tr><td>味精, 大蒜</td><td>26.5</td></tr>
<tr><td>山核桃</td><td>26.8</td></tr>
<tr><td>甜面酱</td><td>27.1</td></tr>
<tr><td>金针菜</td><td>27.2</td></tr>
<tr><td>枣</td><td>28.6</td></tr>
<tr><td>木耳</td><td>35.7</td></tr>
<tr><td>银耳</td><td>36.9</td></tr>
<tr><td>面筋</td><td>39.1</td></tr>
<tr><td>驴打滚</td><td>39.9</td></tr>
<tr><td>油炸土豆片</td><td>40</td></tr>
<tr><td>油饼</td><td>40.4</td></tr>
<tr><td>艾窝窝</td><td>43.1</td></tr>
<tr><td>花卷</td><td>45.6</td></tr>
<tr><td>馒头</td><td>48.3</td></tr>
<tr><td>芝麻南唐</td><td>49.7</td></tr>
<tr><td>茶叶</td><td>50.3</td></tr>
<tr><td>烙饼, 豆沙</td><td>51</td></tr>
<tr><td>牛乳粉, 麻花, 巧克力</td><td>51.9</td></tr>
<tr><td>月饼</td><td>52.3</td></tr>
<tr><td>芸豆</td><td>54.2</td></tr>
<tr><td>豌豆</td><td>54.3</td></tr>
<tr><td>炼乳</td><td>55.4</td></tr>
<tr><td>赤豆</td><td>55.7</td></tr>
<tr><td>面条</td><td>58</td></tr>
<tr><td>面包</td><td>58.1</td></tr>
<tr><td>绿豆</td><td>58.5</td></tr>
<tr><td>豇豆</td><td>58.9</td></tr>
<tr><td>苦荞麦粉</td><td>60.2</td></tr>
<tr><td>方便面</td><td>60.9</td></tr>
<tr><td>蛋糕</td><td>61.2</td></tr>
<tr><td>燕麦片</td><td>61.6</td></tr>
<tr><td>烧饼</td><td>62.7</td></tr>
<tr><td>桂圆干</td><td>62.8</td></tr>
<tr><td>莲子</td><td>64.2</td></tr>
<tr><td>豆浆粉</td><td>64.6</td></tr>
<tr><td>玉米</td><td>66.6</td></tr>
<tr><td>玉米面</td><td>66.9</td></tr>
<tr><td>牛肉松</td><td>67.7</td></tr>
<tr><td>豆奶粉, 苹果酱</td><td>68.7</td></tr>
<tr><td>饼干</td><td>69.2</td></tr>
<tr><td>高粱米</td><td>70.4</td></tr>
<tr><td>小麦粉</td><td>71.5</td></tr>
<tr><td>绿豆糕</td><td>72.2</td></tr>
<tr><td>黄米</td><td>72.5</td></tr>
<tr><td>白果</td><td>72.6</td></tr>
<tr><td>乳儿粉, 小米</td><td>73.5</td></tr>
<tr><td>血糯米</td><td>73.7</td></tr>
<tr><td>挂面</td><td>74.5</td></tr>
<tr><td>煎饼</td><td>74.7</td></tr>
<tr><td>稻米(东北）</td><td>75.3</td></tr>
<tr><td>通心粉</td><td>75.4</td></tr>
<tr><td>栗子</td><td>77.2</td></tr>
<tr><td>果丹皮</td><td>77.4</td></tr>
<tr><td>稻米, 糯米</td><td>77.5</td></tr>
<tr><td>江米条</td><td>77.7</td></tr>
<tr><td>米粉</td><td>78.2</td></tr>
<tr><td>健儿粉</td><td>82.7</td></tr>
<tr><td>奶糖</td><td>84.5</td></tr>
<tr><td>藕粉</td><td>92.9</td></tr>
</tbody>
</table>
</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="代码获取碳水化合物列表"></a><a href="#代码获取碳水化合物列表" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码获取碳水化合物列表</h2>
<p>需要积分才能下载文档？不存在的！！！</p>
<p>作为一位前端工程师，这个不在话下！！！</p>
<p>通过dom操作，js处理与转换，最终生成markdown列表</p>
<pre><code class="hljs css languages- javascript"><span class="hljs-keyword">var</span> names = [];
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> arr = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'p'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
    names.push(arr[i].innerText)
  }
}

<span class="hljs-keyword">var</span> names2 = [
  <span class="hljs-string">"稻米(东北）"</span>, <span class="hljs-string">"75.3"</span>, <span class="hljs-string">"素虾"</span>, <span class="hljs-string">"16.6"</span>, <span class="hljs-string">"白瓜子"</span>, <span class="hljs-string">"3.8"</span>, <span class="hljs-string">"稻米"</span>, <span class="hljs-string">"77.5"</span>, <span class="hljs-string">"芸豆"</span>, <span class="hljs-string">"54.2"</span>, <span class="hljs-string">"山核桃"</span>, <span class="hljs-string">"26.8"</span>, <span class="hljs-string">"方便面"</span>, <span class="hljs-string">"60.9"</span>, <span class="hljs-string">"红薯"</span>, <span class="hljs-string">"23.1"</span>, <span class="hljs-string">"松子"</span>, <span class="hljs-string">"9"</span>, <span class="hljs-string">"高粱米"</span>, <span class="hljs-string">"70.4"</span>, <span class="hljs-string">"胡萝卜"</span>, <span class="hljs-string">"7.7"</span>, <span class="hljs-string">"松子仁"</span>, <span class="hljs-string">"2.2"</span>, <span class="hljs-string">"挂面"</span>, <span class="hljs-string">"74.5"</span>, <span class="hljs-string">"姜"</span>, <span class="hljs-string">"7.6"</span>, <span class="hljs-string">"西瓜子"</span>, <span class="hljs-string">"9.7"</span>, <span class="hljs-string">"花卷"</span>, <span class="hljs-string">"45.6"</span>, <span class="hljs-string">"萝卜"</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"榛子"</span>, <span class="hljs-string">"14.7"</span>, <span class="hljs-string">"黄米"</span>, <span class="hljs-string">"72.5"</span>, <span class="hljs-string">"马铃薯"</span>, <span class="hljs-string">"16.5"</span>, <span class="hljs-string">"杏仁"</span>, <span class="hljs-string">"2.9"</span>, <span class="hljs-string">"煎饼"</span>, <span class="hljs-string">"74.7"</span>, <span class="hljs-string">"油炸土豆片"</span>, <span class="hljs-string">"40"</span>, <span class="hljs-string">"面筋"</span>, <span class="hljs-string">"39.1"</span>, <span class="hljs-string">"苦荞麦粉"</span>, <span class="hljs-string">"60.2"</span>, <span class="hljs-string">"藕"</span>, <span class="hljs-string">"15.2"</span>, <span class="hljs-string">"艾窝窝"</span>, <span class="hljs-string">"43.1"</span>, <span class="hljs-string">"烙饼"</span>, <span class="hljs-string">"51"</span>, <span class="hljs-string">"藕粉"</span>, <span class="hljs-string">"92.9"</span>, <span class="hljs-string">"饼干"</span>, <span class="hljs-string">"69.2"</span>, <span class="hljs-string">"馒头"</span>, <span class="hljs-string">"48.3"</span>, <span class="hljs-string">"山药"</span>, <span class="hljs-string">"11.6"</span>, <span class="hljs-string">"蛋糕"</span>, <span class="hljs-string">"61.2"</span>, <span class="hljs-string">"面条"</span>, <span class="hljs-string">"58"</span>, <span class="hljs-string">"菠萝"</span>, <span class="hljs-string">"9.5"</span>, <span class="hljs-string">"豆汁"</span>, <span class="hljs-string">"1.3"</span>, <span class="hljs-string">"米饭"</span>, <span class="hljs-string">"25"</span>, <span class="hljs-string">"草莓"</span>, <span class="hljs-string">"6"</span>, <span class="hljs-string">"江米条"</span>, <span class="hljs-string">"77.7"</span>, <span class="hljs-string">"米粥"</span>, <span class="hljs-string">"9.8"</span>, <span class="hljs-string">"橙"</span>, <span class="hljs-string">"10.5"</span>, <span class="hljs-string">"凉粉"</span>, <span class="hljs-string">"11.2"</span>, <span class="hljs-string">"米粉"</span>, <span class="hljs-string">"78.2"</span>, <span class="hljs-string">"柑"</span>, <span class="hljs-string">"11.5"</span>, <span class="hljs-string">"绿豆糕"</span>, <span class="hljs-string">"72.2"</span>, <span class="hljs-string">"糯米"</span>, <span class="hljs-string">"77.5"</span>, <span class="hljs-string">"甘蔗"</span>, <span class="hljs-string">"15.4"</span>, <span class="hljs-string">"驴打滚"</span>, <span class="hljs-string">"39.9"</span>, <span class="hljs-string">"血糯米"</span>, <span class="hljs-string">"73.7"</span>, <span class="hljs-string">"桂圆"</span>, <span class="hljs-string">"16.2"</span>, <span class="hljs-string">"麻花"</span>, <span class="hljs-string">"51.9"</span>, <span class="hljs-string">"烧饼"</span>, <span class="hljs-string">"62.7"</span>, <span class="hljs-string">"桂圆干"</span>, <span class="hljs-string">"62.8"</span>, <span class="hljs-string">"面包"</span>, <span class="hljs-string">"58.1"</span>, <span class="hljs-string">"通心粉"</span>, <span class="hljs-string">"75.4"</span>, <span class="hljs-string">"果丹皮"</span>, <span class="hljs-string">"77.4"</span>, <span class="hljs-string">"月饼"</span>, <span class="hljs-string">"52.3"</span>, <span class="hljs-string">"小麦粉"</span>, <span class="hljs-string">"71.5"</span>, <span class="hljs-string">"山楂"</span>, <span class="hljs-string">"22"</span>, <span class="hljs-string">"冰欺凌"</span>, <span class="hljs-string">"17.3"</span>, <span class="hljs-string">"小米"</span>, <span class="hljs-string">"73.5"</span>, <span class="hljs-string">"橘子"</span>, <span class="hljs-string">"9.7"</span>, <span class="hljs-string">"茶叶"</span>, <span class="hljs-string">"50.3"</span>, <span class="hljs-string">"小米粥"</span>, <span class="hljs-string">"8.4"</span>, <span class="hljs-string">"李子"</span>, <span class="hljs-string">"7.8"</span>, <span class="hljs-string">"橘汁"</span>, <span class="hljs-string">"23.2"</span>, <span class="hljs-string">"燕麦片"</span>, <span class="hljs-string">"61.6"</span>, <span class="hljs-string">"梨"</span>, <span class="hljs-string">"7.3"</span>, <span class="hljs-string">"奶糖"</span>, <span class="hljs-string">"84.5"</span>, <span class="hljs-string">"油饼"</span>, <span class="hljs-string">"40.4"</span>, <span class="hljs-string">"荔枝"</span>, <span class="hljs-string">"16.1"</span>, <span class="hljs-string">"巧克力"</span>, <span class="hljs-string">"51.9"</span>, <span class="hljs-string">"玉米"</span>, <span class="hljs-string">"66.6"</span>, <span class="hljs-string">"芒果"</span>, <span class="hljs-string">"7"</span>, <span class="hljs-string">"芝麻南唐"</span>, <span class="hljs-string">"49.7"</span>, <span class="hljs-string">"玉米面"</span>, <span class="hljs-string">"66.9"</span>, <span class="hljs-string">"苹果"</span>, <span class="hljs-string">"12.3"</span>, <span class="hljs-string">"苹果酱"</span>, <span class="hljs-string">"68.7"</span>, <span class="hljs-string">"豇豆"</span>, <span class="hljs-string">"58.9"</span>, <span class="hljs-string">"核桃"</span>, <span class="hljs-string">"9.6"</span>, <span class="hljs-string">"炼乳"</span>, <span class="hljs-string">"55.4"</span>, <span class="hljs-string">"豆腐"</span>, <span class="hljs-string">"3.8"</span>, <span class="hljs-string">"葡萄"</span>, <span class="hljs-string">"9.9"</span>, <span class="hljs-string">"母乳"</span>, <span class="hljs-string">"7.4"</span>, <span class="hljs-string">"豆腐干"</span>, <span class="hljs-string">"10.7"</span>, <span class="hljs-string">"柿子"</span>, <span class="hljs-string">"17.1"</span>, <span class="hljs-string">"奶酪"</span>, <span class="hljs-string">"3.5"</span>
  , <span class="hljs-string">"豆腐皮"</span>, <span class="hljs-string">"18.6"</span>, <span class="hljs-string">"桃"</span>, <span class="hljs-string">"10.9"</span>, <span class="hljs-string">"牛奶"</span>, <span class="hljs-string">"3.4"</span>, <span class="hljs-string">"豆浆粉"</span>, <span class="hljs-string">"64.6"</span>, <span class="hljs-string">"香蕉"</span>, <span class="hljs-string">"20.8"</span>, <span class="hljs-string">"牛乳粉"</span>, <span class="hljs-string">"51.9"</span>, <span class="hljs-string">"豆沙"</span>, <span class="hljs-string">"51"</span>, <span class="hljs-string">"杏"</span>, <span class="hljs-string">"7.5"</span>, <span class="hljs-string">"酸奶"</span>, <span class="hljs-string">"9.3"</span>, <span class="hljs-string">"腐乳"</span>, <span class="hljs-string">"7.6"</span>, <span class="hljs-string">"枣"</span>, <span class="hljs-string">"28.6"</span>, <span class="hljs-string">"羊乳"</span>, <span class="hljs-string">"5.4"</span>, <span class="hljs-string">"腐竹"</span>, <span class="hljs-string">"21.3"</span>, <span class="hljs-string">"猕猴桃"</span>, <span class="hljs-string">"11.9"</span>, <span class="hljs-string">"豆奶粉"</span>, <span class="hljs-string">"68.7"</span>, <span class="hljs-string">"黄豆"</span>, <span class="hljs-string">"18.6"</span>, <span class="hljs-string">"白果"</span>, <span class="hljs-string">"72.6"</span>, <span class="hljs-string">"健儿粉"</span>, <span class="hljs-string">"82.7"</span>, <span class="hljs-string">"绿豆"</span>, <span class="hljs-string">"58.5"</span>, <span class="hljs-string">"花生"</span>, <span class="hljs-string">"17.3"</span>, <span class="hljs-string">"乳儿粉"</span>, <span class="hljs-string">"73.5"</span>, <span class="hljs-string">"素鸡"</span>, <span class="hljs-string">"3.9"</span>, <span class="hljs-string">"花生仁"</span>, <span class="hljs-string">"16"</span>, <span class="hljs-string">"鹌鹑蛋"</span>, <span class="hljs-string">"2.1"</span>, <span class="hljs-string">"豌豆"</span>, <span class="hljs-string">"54.3"</span>, <span class="hljs-string">"葵花籽"</span>, <span class="hljs-string">"13"</span>, <span class="hljs-string">"鸡蛋"</span>, <span class="hljs-string">"1.3"</span>, <span class="hljs-string">"赤豆"</span>, <span class="hljs-string">"55.7"</span>, <span class="hljs-string">"莲子"</span>, <span class="hljs-string">"64.2"</span>, <span class="hljs-string">"松花蛋"</span>, <span class="hljs-string">"4.5"</span>, <span class="hljs-string">"油豆腐"</span>, <span class="hljs-string">"4.3"</span>, <span class="hljs-string">"栗子"</span>, <span class="hljs-string">"77.2"</span>, <span class="hljs-string">"鸭蛋"</span>, <span class="hljs-string">"3.1"</span>, <span class="hljs-string">"香肠"</span>, <span class="hljs-string">"5.9"</span>, <span class="hljs-string">"荷兰豆"</span>, <span class="hljs-string">"3.5"</span>, <span class="hljs-string">"鹅蛋"</span>, <span class="hljs-string">"2.8"</span>, <span class="hljs-string">"火腿肠"</span>, <span class="hljs-string">"15.6"</span>, <span class="hljs-string">"黄豆芽"</span>, <span class="hljs-string">"3"</span>, <span class="hljs-string">"甜面酱"</span>, <span class="hljs-string">"27.1"</span>, <span class="hljs-string">"狗肉"</span>, <span class="hljs-string">"1.8"</span>, <span class="hljs-string">"鲜豇豆"</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"味精"</span>, <span class="hljs-string">"26.5"</span>, <span class="hljs-string">"酱牛肉"</span>, <span class="hljs-string">"3.2"</span>, <span class="hljs-string">"毛豆"</span>, <span class="hljs-string">"6.5"</span>, <span class="hljs-string">"芝麻酱"</span>, <span class="hljs-string">"16.8"</span>, <span class="hljs-string">"驴肉"</span>, <span class="hljs-string">"0.4"</span>, <span class="hljs-string">"豌豆苗"</span>, <span class="hljs-string">"2.8"</span>, <span class="hljs-string">"大头菜"</span>, <span class="hljs-string">"6"</span>, <span class="hljs-string">"香菇"</span>, <span class="hljs-string">"1.9"</span>, <span class="hljs-string">"芝麻"</span>, <span class="hljs-string">"21.7"</span>, <span class="hljs-string">"冬菜"</span>, <span class="hljs-string">"7"</span>, <span class="hljs-string">"八宝菜"</span>, <span class="hljs-string">"10.2"</span>, <span class="hljs-string">"大白菜"</span>, <span class="hljs-string">"3.1"</span>, <span class="hljs-string">"甘露"</span>, <span class="hljs-string">"6.3"</span>, <span class="hljs-string">"马肉"</span>, <span class="hljs-string">"11"</span>, <span class="hljs-string">"菠菜"</span>, <span class="hljs-string">"2.8"</span>, <span class="hljs-string">"腌黄瓜"</span>, <span class="hljs-string">"2.2"</span>, <span class="hljs-string">"牛肉"</span>, <span class="hljs-string">"0.1"</span>, <span class="hljs-string">"菜花"</span>, <span class="hljs-string">"3.4"</span>, <span class="hljs-string">"糖蒜"</span>, <span class="hljs-string">"25.9"</span>, <span class="hljs-string">"牛肉干"</span>, <span class="hljs-string">"1.9"</span>, <span class="hljs-string">"油菜心"</span>, <span class="hljs-string">"1.8"</span>, <span class="hljs-string">"腌雪里红"</span>, <span class="hljs-string">"3.3"</span>, <span class="hljs-string">"牛肉松"</span>, <span class="hljs-string">"67.7"</span>, <span class="hljs-string">"大葱"</span>, <span class="hljs-string">"5.2"</span>, <span class="hljs-string">"榨菜"</span>, <span class="hljs-string">"4.4"</span>, <span class="hljs-string">"兔肉"</span>, <span class="hljs-string">"0.9"</span>, <span class="hljs-string">"大蒜"</span>, <span class="hljs-string">"26.5"</span>, <span class="hljs-string">"芫荽"</span>, <span class="hljs-string">"5"</span>, <span class="hljs-string">"羊肉"</span>, <span class="hljs-string">"0.2"</span>, <span class="hljs-string">"茭白"</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"油菜"</span>, <span class="hljs-string">"2.7"</span>, <span class="hljs-string">"猪肝"</span>, <span class="hljs-string">"5.6"</span>, <span class="hljs-string">"金针菜"</span>, <span class="hljs-string">"27.2"</span>, <span class="hljs-string">"西兰花"</span>, <span class="hljs-string">"2.7"</span>, <span class="hljs-string">"猪肉"</span>, <span class="hljs-string">"1.5"</span>, <span class="hljs-string">"韭菜"</span>, <span class="hljs-string">"3.2"</span>, <span class="hljs-string">"白兰花"</span>, <span class="hljs-string">"4.5"</span>, <span class="hljs-string">"猪心"</span>, <span class="hljs-string">"1.1"</span>, <span class="hljs-string">"芹菜"</span>, <span class="hljs-string">"2.5"</span>, <span class="hljs-string">"白金兰"</span>, <span class="hljs-string">"5.7"</span>, <span class="hljs-string">"腰子"</span>, <span class="hljs-string">"1.4"</span>, <span class="hljs-string">"莴苣"</span>, <span class="hljs-string">"2.2"</span>, <span class="hljs-string">"冬瓜"</span>, <span class="hljs-string">"1.9"</span>, <span class="hljs-string">"猪肘棒"</span>, <span class="hljs-string">"2.1"</span>, <span class="hljs-string">"大黄鱼"</span>, <span class="hljs-string">"0.8"</span>, <span class="hljs-string">"佛手瓜"</span>, <span class="hljs-string">"2.5"</span>, <span class="hljs-string">"鸡翅"</span>, <span class="hljs-string">"4.6"</span>, <span class="hljs-string">"鲫鱼"</span>, <span class="hljs-string">"3.8"</span>, <span class="hljs-string">"哈密瓜"</span>, <span class="hljs-string">"7.7"</span>, <span class="hljs-string">"常见食物碳水化合物列表          "</span>, <span class="hljs-string">" (100克含量计)"</span>, <span class="hljs-string">"鸡胸脯肉"</span>, <span class="hljs-string">"2.5"</span>, <span class="hljs-string">"鳕鱼"</span>, <span class="hljs-string">"0.5"</span>, <span class="hljs-string">"苦瓜"</span>, <span class="hljs-string">"3.5"</span>, <span class="hljs-string">"鸭肉"</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"鱼子酱"</span>, <span class="hljs-string">"14.4"</span>, <span class="hljs-string">"丝瓜"</span>, <span class="hljs-string">"3.6"</span>, <span class="hljs-string">"炸鸡"</span>, <span class="hljs-string">"10.5"</span>, <span class="hljs-string">"鲍鱼"</span>, <span class="hljs-string">"6.6"</span>, <span class="hljs-string">"西瓜"</span>, <span class="hljs-string">"6.4"</span>, <span class="hljs-string">"蚌肉"</span>, <span class="hljs-string">"0.8"</span>, <span class="hljs-string">"蛤蜊"</span>, <span class="hljs-string">"0.8"</span>, <span class="hljs-string">"西葫芦"</span>, <span class="hljs-string">"3.2"</span>, <span class="hljs-string">"淡菜"</span>, <span class="hljs-string">"4.7"</span>, <span class="hljs-string">"河蚌"</span>, <span class="hljs-string">"0.8"</span>, <span class="hljs-string">"番茄"</span>, <span class="hljs-string">"3.5"</span>, <span class="hljs-string">"海参"</span>, <span class="hljs-string">"0.9"</span>, <span class="hljs-string">"草虾"</span>, <span class="hljs-string">"5.4"</span>, <span class="hljs-string">"茄子"</span>, <span class="hljs-string">"3.5"</span>, <span class="hljs-string">"辣椒"</span>, <span class="hljs-string">"3.7"</span>, <span class="hljs-string">"基围虾"</span>, <span class="hljs-string">"3.9"</span>, <span class="hljs-string">"醋"</span>, <span class="hljs-string">"4.9"</span>, <span class="hljs-string">"甜椒"</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"蟹"</span>, <span class="hljs-string">"4.7"</span>, <span class="hljs-string">"豆瓣酱"</span>, <span class="hljs-string">"24.8"</span>, <span class="hljs-string">"蘑菇"</span>, <span class="hljs-string">"2.7"</span>, <span class="hljs-string">"蟹肉"</span>, <span class="hljs-string">"1.1"</span>, <span class="hljs-string">"黄酱"</span>, <span class="hljs-string">"17.9"</span>, <span class="hljs-string">"海带"</span>, <span class="hljs-string">"17.3"</span>, <span class="hljs-string">"紫菜"</span>, <span class="hljs-string">"22.5"</span>, <span class="hljs-string">"花生酱"</span>, <span class="hljs-string">"2.3"</span>, <span class="hljs-string">"金针菇"</span>, <span class="hljs-string">"3.3"</span>, <span class="hljs-string">"银耳"</span>, <span class="hljs-string">"36.9"</span>, <span class="hljs-string">"酱油"</span>, <span class="hljs-string">"9.9"</span>, <span class="hljs-string">"木耳"</span>, <span class="hljs-string">"35.7"</span>,
]
names2.splice(<span class="hljs-number">354</span>, <span class="hljs-number">2</span>)

<span class="hljs-keyword">var</span> objName = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; names2.length; i += <span class="hljs-number">2</span>) {
  objName.push({
    <span class="hljs-attr">name</span>: names2[i],
    <span class="hljs-attr">value</span>: <span class="hljs-built_in">Number</span>(names2[i + <span class="hljs-number">1</span>])
  })
}

ss = objName.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> a.value - b.value;
})

<span class="hljs-keyword">var</span> list = <span class="hljs-string">""</span>;

<span class="hljs-keyword">var</span> v = ss[<span class="hljs-number">0</span>].value;
ss.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, i</span>) </span>{
  <span class="hljs-keyword">var</span> nexto = ss[i + <span class="hljs-number">1</span>] || {};
  <span class="hljs-keyword">if</span> (v == nexto.value) {
    list += item.name + <span class="hljs-string">', '</span>;
  } <span class="hljs-keyword">else</span> {
    v = nexto.value;
    list += item.name + <span class="hljs-string">'|'</span> + item.value + <span class="hljs-string">'\n'</span>;
  }
})
</code></pre>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/07/problem.html">问题汇总</a></h1><p class="post-meta">June 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="portal发布系统发布停服务失败不会更新service脚本"></a><a href="#portal发布系统发布停服务失败不会更新service脚本" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Portal发布系统发布停服务失败不会更新service脚本</h2>
<p>停服务失败后更新脚本，并再次执行停服务操作</p>
<h2><a class="anchor" aria-hidden="true" id="portal发布使用node编译会报错-使用yarn则不会"></a><a href="#portal发布使用node编译会报错-使用yarn则不会" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Portal发布使用node编译会报错，使用yarn则不会</h2>
<p>看到错误是HeadTable报了错误，还以为和rc-table的版本有关，换了版本之后发现不行，应该和rc-table
版本无关，隐隐感觉是编译打包，或者npm install安装包的问题。后来查出是webpack4需要node的版本
大于等于6.11.5，这个就比较坑了，而portal还不支持指定node版本进行安装，更诡异的是，build.sh里面
已经指定了node的版本，依然不行。原因在于：node安装包的步骤先于build.sh，所以指定的node版本在
Node安装包的时候并没有生效。坑。。。</p>
<h2><a class="anchor" aria-hidden="true" id="发布的服务使用的3001端口-无法再使用nginx在3001进行代理"></a><a href="#发布的服务使用的3001端口-无法再使用nginx在3001进行代理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>发布的服务使用的3001端口，无法再使用nginx在3001进行代理</h2>
<p>部署机器：l-tcdev2.wap.dev.cn0
通过80端口进行统一分发</p>
<p>如果是~* .html$ 转发到本机器的3001端口，使用web服务
如果是= \             转发到本机器的3001端口，使用web服务
剩下的其他的       转发到本机器的3000端口，使用api服务</p>
<h2><a class="anchor" aria-hidden="true" id="dev连接beta的redis-一直加载不出来-返回504-但是能连上"></a><a href="#dev连接beta的redis-一直加载不出来-返回504-但是能连上" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dev连接Beta的redis，一直加载不出来，返回504，但是能连上</h2>
<p>PS：解决问题并不难，难的是定位问题。
一开始，各种定位不出问题来，通过yarn start启动服务的时候看到Ready check failed错误。
在redis.createCliend的option中加上no_ready_check: true就可以了</p>
<h2><a class="anchor" aria-hidden="true" id="revert之后merge问题"></a><a href="#revert之后merge问题" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Revert之后merge问题</h2>
<p>参见<a href="https://github.com/git/git/blob/master/Documentation/howto/revert-a-faulty-merge.txt">https://github.com/git/git/blob/master/Documentation/howto/revert-a-faulty-merge.txt</a></p>
<p>总的来说如下</p>
<pre><code class="hljs">——o——o——-o——M——-x——x——W  master主干
           /
——-—A—————<span class="hljs-keyword">B </span>             development分支

———-A—————<span class="hljs-keyword">B———C————D </span>     development分支
</code></pre>
<ul>
<li>M是将B merge到master之后的节点</li>
<li>W是将master revert到之前某个节点的节点</li>
</ul>
<p>分支B分支上的代码合并到了master(M节点处)，并在master上进行了revert(W节点处)
那么之后development分支修复了此问题，当我们再次将master合并过来的时候，发现A和B不见了</p>
<p>解决方法：执行如下命令</p>
<pre><code class="hljs css languages- bash">git revert W <span class="hljs-comment">#W代表节点的md5值</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="websocket连接失败"></a><a href="#websocket连接失败" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Websocket连接失败</h2>
<p>在easy1机器上没有问题，在easy3机器上有问题，据此推断应该不是代码问题，应该是ng问题
经查，需要设置如下三个参数来使websocket正确工作(easy1上设置了，而easy3上并没有)</p>
<pre><code class="hljs css languages- nginx"><span class="hljs-attribute">location</span> / {
    <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
    <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
    <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">"upgrade"</span>;
}
</code></pre>
<p>下面来捋一捋</p>
<p>可参考<a href="http://nginx.org/en/docs/http/websocket.html">http://nginx.org/en/docs/http/websocket.html</a></p>
<ol>
<li>为了将client和server的连接转换为Websockt连接，需要使用Http/1.1才支持的协议切换机制。</li>
<li>Upgrade和Connect参数设置无法从client传到proxied server(ng)，所以需要我们在ng中明确配置</li>
<li>另外ng中Connection的默认值是close</li>
</ol>
<p>综上，设置如上三个参数可解决socket连接问题。</p>
<h2><a class="anchor" aria-hidden="true" id="全栈"></a><a href="#全栈" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>全栈</h2>
<ul>
<li>域名</li>
<li>内网</li>
<li>机器(权限，开发机，beta机，线上机器)</li>
<li>发布系统(jenkins，前后端关联(java的maven，node的ncs))</li>
<li>后端服务器(后端环境，数据库</li>
<li><ul>
<li>node服务器:</li>
</ul></li>
<li><ul>
<li>bluebird Promise</li>
</ul></li>
<li><ul>
<li>chai    单元测试</li>
</ul></li>
<li><ul>
<li>dotenv    环境变量</li>
</ul></li>
<li><ul>
<li>knex        SQL构造工具</li>
</ul></li>
<li><ul>
<li>koa          下一代web开发框架</li>
</ul></li>
<li><ul>
<li>pm2         node进程管理，守护进程</li>
</ul></li>
<li><ul>
<li>pug 模板渲染)</li>
</ul></li>
<li>前端服务器(</li>
<li><ul>
<li>webpack</li>
</ul></li>
<li><ul>
<li>react,vue,pug</li>
</ul></li>
<li><ul>
<li>angular)</li>
</ul></li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/07/nginx-config.html">一个nginx配置</a></h1><p class="post-meta">June 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="通过80端口分发"></a><a href="#通过80端口分发" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>通过80端口分发</h2>
<pre><code class="hljs css languages- nginx">一个nginx配置

#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

#upstream baidu_server{
 #   server 111.13.101.208:443;
#}

events {
    worker_connections  1024;
}


http {

upstream baidu_server{
    server 111.13.101.208:80;
}

upstream smart_hotel_api {

    #server 10.86.42.215:3210;
        server 10.86.42.215:3000;
  }

upstream smart_hotel_os_web {

    #server 10.90.165.81:3212;
    server 10.86.42.215:3001;
  }

    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    server {
        listen       80;
        server_name  l-tcdev2.wap.dev.cn0.qunar.com;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        more_set_headers "Access-Control-Allow-Origin: *";

       location ~* \.html$ {
           proxy_set_header Host $host;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_pass http://smart_hotel_os_web;
       }


       location = / {
           proxy_pass http://smart_hotel_os_web;
       }

       location / {
           proxy_set_header Host $host;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_pass http://smart_hotel_api;
       }


        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

    }

    server {
        listen 3002;
        server_name l-tcdev2.wap.dev.cn0.qunar.com;

        location /bind/login-validate-token {
            proxy_pass http://baidu_server;
        proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 }
    }
}
</code></pre>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/07/good-tool.html">好用的工具</a></h1><p class="post-meta">June 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="irvue"></a><a href="#irvue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Irvue</h2>
<blockquote>
<p>一款好用的Mac壁纸更换工具，App Store上面有下载</p>
</blockquote>
<p><img src="/diary/img/Irvue.png" alt="Irvue"></p>
<h2><a class="anchor" aria-hidden="true" id="pixelstyle"></a><a href="#pixelstyle" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PixelStyle</h2>
<blockquote>
<p>感觉是轻量版的PS，App Store上面有下载</p>
</blockquote>
<p><img src="/diary/img/pixelStyle.png" alt="PixelStyle"></p>
<h2><a class="anchor" aria-hidden="true" id="iterm2"></a><a href="#iterm2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>iTerm2</h2>
<blockquote>
<p>Mac下好用的终端工具，<a href="https://www.iterm2.com/">传送门</a></p>
</blockquote>
<p><img src="/diary/img/iTerm2.png" alt="iTerm2"></p>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/07/good-npm.html">好用的npm包</a></h1><p class="post-meta">June 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><div class="update">
<h2><a class="anchor" aria-hidden="true" id="20180618更"></a><a href="#20180618更" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2018.06.18更</h2>
<h3><a class="anchor" aria-hidden="true" id="jest"></a><a href="#jest" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>jest</h3>
<blockquote>
<p>FB出品，javascript代码测试工具</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="enzyme"></a><a href="#enzyme" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>enzyme</h3>
<blockquote>
<p>aribnb出品，用来测试react的库</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="prettier"></a><a href="#prettier" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>prettier</h3>
<blockquote>
<p>有见识的代码格式化工具(甩lint几十条街)</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="rimraf"></a><a href="#rimraf" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>rimraf</h3>
<blockquote>
<p>相当于终端中的<code>rm -rf</code></p>
</blockquote>
</div>
<h2><a class="anchor" aria-hidden="true" id="np"></a><a href="#np" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>np</h2>
<blockquote>
<p>npm包发布工具，不如<code>yarn publish</code>好用</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="inquirer"></a><a href="#inquirer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>inquirer</h2>
<blockquote>
<p>交互式的命令行工具</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="warning"></a><a href="#warning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>warning</h2>
<blockquote>
<p>警告</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="execa"></a><a href="#execa" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>execa</h2>
<blockquote>
<p>Promise执行终端命令工具</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="walk-blob"></a><a href="#walk-blob" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>walk, blob</h2>
<blockquote>
<p>遍历文件目录</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="docusaurus"></a><a href="#docusaurus" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>docusaurus</h2>
<blockquote>
<p>FB出品，与github pages结合，快速构建静态文档和静态博客的网站</p>
</blockquote>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/diary/blog/2018/06/06/framework.html">流行框架学习对比</a></h1><p class="post-meta">June 6, 2018</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Shiyong Yin</a></p></div></header><article class="post-content"><div><span><h2><a class="anchor" aria-hidden="true" id="有安歇流行的前端框架"></a><a href="#有安歇流行的前端框架" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>有安歇流行的前端框架</h2>
<p>我认为目前比较流行的框架或者库主要包含vue, react, angular这三个。</p>
<blockquote>
<p>排名分先后 :)</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="angular系统结构图"></a><a href="#angular系统结构图" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Angular系统结构图</h2>
<p><img src="/diary/img/Angular系统结构图.png" alt="angular"></p>
<h3><a class="anchor" aria-hidden="true" id="使用心得"></a><a href="#使用心得" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用心得</h3>
<h4><a class="anchor" aria-hidden="true" id="缺点"></a><a href="#缺点" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>缺点</h4>
<ul>
<li>双绑对象的初始值在定义变量时设置不生效，只能在ngOnInit里面设置</li>
<li>严重依赖ng命令，一般开发都是直接新建文件夹，里面新建个index就可以开始工作了</li>
<li>条条框框太多，模拟数据复杂，不仅用到了service，还用到了InMermoryData等</li>
<li>使用了rxjs，学习成本较高</li>
<li>父子组件之间通信步骤繁琐，子向传递数据的参数必须是$event?!</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="优点"></a><a href="#优点" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优点</h4>
<ul>
<li>ng是一套工具，有自己的打包工具，方便</li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div></div></div><footer class="nav-footer" id="footer"><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"></a><section class="copyright">Copyright © 2018-2018 Shiyong Yin</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'ab87fbb1dabfa3bd00662f0f793a313f',
                indexName: 'ysyfff',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>